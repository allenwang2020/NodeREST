/*
  filename: angular.integralui.tabstrip.min.js
  version : 1.1.5
  Copyright © 2014-2016 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUITabStripService",["$rootScope","IntegralUIPublicService",function(b,t){return{addTab:function(e,f){b.$broadcast(e+"-add-tab",f)},clearTabs:function(e){b.$broadcast(e+"-clear-tabs")},insertTabAt:function(e,f,q){b.$broadcast(e+"-insert-tab-at",f,q)},insertTabBefore:function(e,f,q){b.$broadcast(e+"-insert-tab-before",f,q)},insertTabAfter:function(e,f,q){b.$broadcast(e+"-insert-tab-after",f,q)},removeTab:function(e,f){b.$broadcast(e+"-remove-tab",f)},removeTabAt:function(e,
f){b.$broadcast(e+"-remove-tab-at",f)},loadData:function(e,f,q){b.$broadcast(e+"-load-data",f,q)},findTabById:function(e,f){b.$broadcast(e+"-find-tab-by-id",f);var q=this.getTempData();this.clearTempData();return q?q:null},findTabByText:function(e,f){b.$broadcast(e+"-find-tab-by-text",f);var q=this.getTempData();this.clearTempData();return q?q:null},clearTempData:function(){tempData=null},getList:function(e,f){b.$broadcast(e+"-get-list",f);var q=this.getTempData();this.clearTempData();return q?q:
[]},getTempData:function(){return tempData},setTempData:function(b){tempData=b},clearSelection:function(e){b.$broadcast(e+"-clear-selection")},selectedTab:function(e,f){if(f)b.$broadcast(e+"-set-selected-tab",f);else{b.$broadcast(e+"-get-selected-tab");var q=this.getTempData();this.clearTempData();return q?q:null}},refresh:function(e){b.$broadcast(e+"-refresh")},resumeLayout:function(e){b.$broadcast(e+"-resume-layout")},suspendLayout:function(e){b.$broadcast(e+"-suspend-layout")},updateLayout:function(e){b.$broadcast(e+
"-update-layout")}}}]).controller("IntegralUITabStripController",["$scope","$element","IntegralUIInternalService","IntegralUIDataService","IntegralUITabStripService",function(b,t,e,f,q){var c=this;c.defaultStyle={general:"iui-tabstrip",navigation:{general:"iui-tabstrip-navigation",button:{disabled:"iui-tabstrip-navigation-button-disabled",normal:"iui-tabstrip-navigation-button",hovered:"iui-tabstrip-navigation-button-hovered",selected:"iui-tabstrip-navigation-button-selected"}},tab:{general:"iui-tab",
header:{content:"iui-tab-header-content",disabled:"iui-tab-header-disabled",focused:"iui-tab-header-focused",normal:"iui-tab-header",hovered:"iui-tab-header-hovered",selected:"iui-tab-header-selected"},content:{disabled:"iui-tab-content-disabled",focused:"iui-tab-content-focused",normal:"iui-tab-content",hovered:"iui-tab-content-hovered",selected:"iui-tab-content-selected"}}};c.options={};this.updateOptions=function(a){a?(c.options={controlStyle:c.defaultStyle,enabled:e.isFieldAvailable(a.enabled,
!0),hoverSelection:e.isFieldAvailable(a.hoverSelection,!1),hoverTab:null,rtl:e.isFieldAvailable(a.rtl,!1),selectedTab:e.isFieldAvailable(a.selectedTab,c.options.selectedTab?c.options.selectedTab:null),showCloseButton:e.isFieldAvailable(a.showCloseButton,!0),showIcons:e.isFieldAvailable(a.showIcons,!0),tabIcon:e.isFieldAvailable(a.tabIcon,""),tabstripPlacement:e.isFieldAvailable(a.tabstripPlacement,"top")},c.updateDataFields(a.dataFields),c.updateControlStyle(a.controlStyle)):(c.options={controlStyle:c.defaultStyle,
enabled:!0,hoverSelection:!1,hoverTab:null,rtl:!1,selectedTab:null,showCloseButton:!0,showIcons:!0,tabIcon:"",tabstripPlacement:"top"},c.updateDataFields())};this.updateDataFields=function(a){c.options.dataFields=a?{content:a.content?a.content:"content",enabled:a.enabled?a.enabled:"enabled",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",name:a.name?a.name:"name",selected:a.selected?a.selected:"selected",style:a.style?a.style:"style",text:a.text?a.text:"text",value:a.value?a.value:"value",visible:a.visible?
a.visible:"visible"}:{content:"content",enabled:"enabled",icon:"icon",id:"id",name:"name",selected:"selected",style:"style",text:"text",value:"value",visible:"visible"};c.dataObj&&c.dataObj.updateDataFields(c.options.dataFields)};c.updateOptions();b.$on(b.name+"-add-tab",function(a,b){c.dataObj.insertAt(b,-1,null,c.tabIsAdded)});b.$on(b.name+"-clear-tabs",function(a){c.dataObj.clear(null,c.listIsCleared)});b.$on(b.name+"-insert-tab-at",function(a,b,d){c.dataObj.insertAt(b,d,null,c.tabIsAdded)});b.$on(b.name+
"-insert-tab-after",function(a,b,d){c.dataObj.insertByRef(b,d,!0,c.tabIsAdded)});b.$on(b.name+"-insert-tab-before",function(a,b,d){c.dataObj.insertByRef(b,d,!1,c.tabIsAdded)});b.$on(b.name+"-remove-tab",function(a,b){c.dataObj.removeAt(b,-1,null,c.tabIsRemoved)});b.$on(b.name+"-remove-tab-at",function(a,b){c.dataObj.removeAt(null,b,null,c.tabIsRemoved)});this.listIsCleared=function(){c.options.selectedTab=null;c.updateLayout()};this.tabIsAdded=function(){c.updateLayout()};this.tabIsRemoved=function(a,
b,d){a&&(a.selected=!1,a==c.options.selectedTab&&(c.options.selectedTab=null));c.updateLayout()};this.addTabScope=function(a){a&&(c.tabScopeList.push(a),c.updateLayout&&c.updateLayout())};this.removeTabScope=function(a){a=c.tabScopeList.indexOf(a);0<=a&&c.tabScopeList.splice(a,1)};this.currentList=[];this.currentScopeList=[];this.getCurrentList=function(){return c.currentList};this.updateCurrentList=function(){c.currentList.length=0;var a=c.dataObj.getList();if(a)for(var b=0;b<a.length;b++){var d=
a[b];c.isTabVisible(d)&&(d.type="tab",d[c.options.dataFields.id]||(d[c.options.dataFields.id]=e.getUniqueId()),c.currentList.push(d))}};this.updateCurrentScopeList=function(){for(var a=c.currentScopeList.length=0;a<c.currentList.length;a++){var b=c.getScopeByTab(c.currentList[a]);b&&c.currentScopeList.push(b)}};this.tabScopeList=b.tabScopeList=[];this.dataEvents={clear:function(a){return angular.isDefined(b.events)&&b.events.clear?b.events.clear():b.clear()},objAdded:function(a){return angular.isDefined(b.events)&&
b.events.tabAdded?b.events.tabAdded({tab:a.e.obj}):b.tabAdded(a)},objAdding:function(a){return angular.isDefined(b.events)&&b.events.tabAdding?b.events.tabAdding({tab:a.e.obj}):b.tabAdding(a)},objRemoved:function(a){return angular.isDefined(b.events)&&b.events.tabRemoved?b.events.tabRemoved({tab:a.e.obj}):b.tabRemoved(a)},objRemoving:function(a){return angular.isDefined(b.events)&&b.events.tabRemoving?b.events.tabRemoving({tab:a.e.obj}):b.tabRemoving(a)}};this.getDataFields=function(a){return{content:a.content?
a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",objects:a.tabs?a.tabs:"tabs",text:a.text?a.text:"text"}};c.dataObj=new f({objects:b.tabs,events:c.dataEvents,fields:c.getDataFields(c.options.dataFields)});b.$on(b.name+"-load-data",function(a,b,d){c.loadData(b,d)});this.loadData=function(a,d){c.allowEvents=!1;c.updateDataFields(d);var e=[];c.dataObj.clear(null,c.listIsCleared);a&&(e=a);if(angular.isDefined(b.tabs))for(var h=b.tabs.length=0;h<e.length;h++)b.tabs.push(e[h]);c.dataObj=
new f({objects:b.tabs,events:c.dataEvents,fields:c.getDataFields(c.options.dataFields)});c.updateLayout();c.allowEvents=!0};this.allowEvents=!0;this.callAfterSelect=function(a){angular.isDefined(b.events)&&b.events.afterSelect?b.events.afterSelect({tab:a}):b.afterSelect({e:{tab:a}});angular.isDefined(b.events)&&b.events.selectionChanged?b.events.selectionChanged({tab:a}):b.selectionChanged({e:{tab:a}})};this.callEnabledChanged=function(a){angular.isDefined(b.events)&&b.events.enabledChanged?b.events.enabledChanged({enabled:a}):
b.enabledChanged({e:{enabled:a}})};this.callTabClick=function(a,c){angular.isDefined(b.events)&&b.events.tabClick?b.events.tabClick({tab:a,mousePos:c}):b.tabClick({e:{tab:a,mousePos:c}})};this.callTabDblClick=function(a,c){angular.isDefined(b.events)&&b.events.tabDblClick?b.events.tabDblClick({tab:a,mousePos:c}):b.tabDblclick({e:{tab:a,mousePos:c}})};this.callTabHover=function(a){angular.isDefined(b.events)&&b.events.tabHover?b.events.tabHover({tab:a}):b.tabHover({e:{tab:a}})};this.callTabRightClick=
function(a,c){angular.isDefined(b.events)&&b.events.tabRightClick?b.events.tabRightClick({tab:a,mousePos:c}):b.tabRightclick({e:{tab:a,mousePos:c}})};this.callStyleChanged=function(a){angular.isDefined(b.events)&&b.events.styleChanged?b.events.styleChanged({style:a}):b.styleChanged({e:{style:a}})};b.$on(b.name+"-find-tab-by-id",function(a,b){q.setTempData(c.findTabById(b))});b.$on(b.name+"-find-tab-by-text",function(a,b){q.setTempData(c.findTabByText(b))});this.findTabById=function(a){return c.dataObj.findObjectById(a)};
this.findTabByText=function(a){return c.dataObj.findObjectByText(a)};this.findTabByName=function(a){var b=null,d=c.getList();if(d)for(var e=0;e<d.length;e++)if(d[e].name==a){b=d[e];break}return b};this.findScopeByName=function(a){for(var b=null,d=0;d<c.tabScopeList.length;d++)if(c.tabScopeList[d].name==a){b=c.tabScopeList[d];break}return b};b.$on(b.name+"-get-ctrl",function(a){e.setTempData(c)});b.$on(b.name+"-get-list",function(a,b){1==b?q.setTempData(c.getCurrentList()):q.setTempData(c.getList())});
this.getTabByScope=function(a){return a&&(a=c.getTabScopeIndex(a),c.isIndexInRange(a))?c.currentList[a]:null};this.getTabCurrentIndex=function(a){return a&&c.currentList?c.currentList.indexOf(a):-1};this.getTabScopeIndex=function(a){return a&&c.currentScopeList?c.currentScopeList.indexOf(a):-1};this.getTabState=function(a){if(a){if(0==c.options.enabled||0==a[c.options.dataFields.enabled])return"disabled";if(a==c.options.selectedTab)return"selected";if(a==c.options.hoverTab)return"hovered"}return"normal"};
this.getList=function(){return c.dataObj.getList()};this.getScopeByTab=function(a){return a?c.findScopeByName(a[c.options.dataFields.name]):null};this.isTabEnabled=function(a){return e.isEnabled(a[c.options.dataFields.enabled])};this.isTabVisible=function(a){return a&&0!=a[c.options.dataFields.visible]?!0:!1};this.isIndexInRange=function(a){return 0<=a&&a<c.currentList.length};this.setHoverTab=function(a){(a=c.getTabByScope(a))?(c.options.hoverTab=a,c.callTabHover(a)):c.options.hoverTab=null};c.allowUpdate=
!0;this.suspendLayout=function(){c.allowUpdate=!1};this.resumeLayout=function(){c.allowUpdate=!0;c.updateLayout()};b.$on(b.name+"-refresh",function(a){c.refresh()});b.$on(b.name+"-resume-layout",function(a){c.resumeLayout()});b.$on(b.name+"-suspend-layout",function(a){c.suspendLayout()});b.$on(b.name+"-update-layout",function(a){c.updateLayout()});this.selectionCancelled=!1;b.$on(b.name+"-get-selected-tab",function(a){q.setTempData(c.tabSelection())});b.$on(b.name+"-set-selected-tab",function(a,b){c.tabSelection(b)});
b.$on(b.name+"-clear-selection",function(a){c.options.selectedTab&&(c.options.selectedTab[c.options.dataFields.selected]=!1);c.options.selectedTab=null});this.tabSelection=function(a,d){if(a){if(c.isTabEnabled(a)){var l=c.tabSelection(),h=!0;l&&(h=!e.isEqual(l[c.options.dataFields.id],a[c.options.dataFields.id]));h&&(l=angular.isDefined(b.events)&&b.events.beforeSelect?b.events.beforeSelect({tab:a}):b.beforeSelect({e:{tab:a}}),c.selectionCancelled=0==l,0!=l&&(c.options.selectedTab&&(c.options.selectedTab.selected=
!1,c.updateTab(c.options.selectedTab)),c.options.selectedTab=a,a[c.options.dataFields.selected]=!0,c.callAfterSelect(a),c.updateLayout()))}}else return c.options.selectedTab};this.selectTab=function(a){(a=c.getTabByScope(a))&&c.tabSelection(a)};var d=function(a){if(a){var b=e.isFieldAvailable(a.general,"iui-tabstrip-navigation");a=a.button;a=e.isString(a)?a:a?{disabled:e.isFieldAvailable(a.disabled,"iui-tabstrip-navigation-button-disabled"),normal:e.isFieldAvailable(a.normal,"iui-tabstrip-navigation-button"),
hovered:e.isFieldAvailable(a.hovered,"iui-tabstrip-navigation-button-hovered"),selected:e.isFieldAvailable(a.selected,"iui-tabstrip-navigation-button-selected")}:c.options.controlStyle.navigation.button;return{general:b,button:a}}return c.options.controlStyle.navigation},z=function(a){if(a){var b=e.isFieldAvailable(a.general,"iui-tab"),d;d=a.header;d=e.isString(d)?d:d?{content:e.isFieldAvailable(d.content,"iui-tab-header-content"),disabled:e.isFieldAvailable(d.disabled,"iui-tab-header-disabled"),
focused:e.isFieldAvailable(d.focused,"iui-tab-header-focused"),normal:e.isFieldAvailable(d.normal,"iui-tab-header"),hovered:e.isFieldAvailable(d.hovered,"iui-tab-header-hovered"),selected:e.isFieldAvailable(d.selected,"iui-tab-header-selected")}:c.options.controlStyle.tab.header;a=a.content;a=e.isString(a)?a:a?{disabled:e.isFieldAvailable(a.disabled,"iui-tab-content-disabled"),focused:e.isFieldAvailable(a.focused,"iui-tab-content-focused"),normal:e.isFieldAvailable(a.normal,"iui-tab-content"),hovered:e.isFieldAvailable(a.hovered,
"iui-tab-content-hovered"),selected:e.isFieldAvailable(a.selected,"iui-tab-content-selected")}:c.options.controlStyle.tab.content;return{general:b,header:d,content:a}}return c.options.controlStyle.tab};this.updateControlStyle=function(a){c.options.controlStyle=a?{general:e.isFieldAvailable(a.general,"iui-tabstrip"),navigation:d(a.navigation),tab:z(a.tab)}:{general:e.isFieldAvailable(c.defaultStyle.general,"iui-tabstrip"),navigation:d(c.defaultStyle.navigation),tab:z(c.defaultStyle.tab)}};this.getCurrentNavigationStyle=
function(){return c.options.controlStyle.navigation};this.getCurrentNavButtonStyle=function(a,b){if(!a)return"";switch(b){case "disabled":return a&&a.disabled?a.disabled:c.options.controlStyle.navigation.button.disabled;case "hovered":return a&&a.hovered?a.hovered:c.options.controlStyle.navigation.button.hovered;case "selected":return a&&a.selected?a.selected:c.options.controlStyle.navigation.button.selected;default:return a&&a.normal?a.normal:c.options.controlStyle.navigation.button.normal}};this.getCurrentTabStyle=
function(a){var b=c.options.controlStyle.tab;if(a)switch(a.style){case "initial":break;default:null!=a.style&&(b=a.style)}return b?b:c.options.controlStyle.tab};this.getCurrentTabHeaderStyle=function(a,b){if(!a||!a.header)return"";switch(b){case "content":return a.header.content?a.header.content:c.options.controlStyle.tab.header.content;case "disabled":return a.header.disabled?a.header.disabled:c.options.controlStyle.tab.header.disabled;case "focused":return a.header.focused?a.header.focused:c.options.controlStyle.tab.header.focused;
case "hovered":return a.header.hovered?a.header.hovered:c.options.controlStyle.tab.header.hovered;case "selected":return a.header.selected?a.header.selected:c.options.controlStyle.tab.header.selected;default:return a.header.normal?a.header.normal:c.options.controlStyle.tab.header.normal}};this.getCurrentTabContentStyle=function(a,b){if(!a||!a.content)return"";switch(b){case "disabled":return a.content.disabled?a.content.disabled:c.options.controlStyle.tab.content.disabled;case "focused":return a.content.focused?
a.content.focused:c.options.controlStyle.tab.content.focused;case "hovered":return a.content.hovered?a.content.hovered:c.options.controlStyle.tab.content.hovered;case "selected":return a.content.selected?a.content.selected:c.options.controlStyle.tab.content.selected;default:return a.content.normal?a.content.normal:c.options.controlStyle.tab.content.normal}};c.updateTab=function(a){(a=c.getScopeByTab(a))&&a.refresh()};b.$watch("controlStyle",function(a,b){a!==b&&(c.options.controlStyle=a,c.refresh(),
c.callStyleChanged(a))});b.$watch("enabled",function(a,b){a!==b&&(c.options.enabled=a,c.refresh(),c.callEnabledChanged(a))});b.$watch("fields",function(a,b){a!==b&&(c.options.dataFields=a,c.UpdateData())});b.$watch("tabIcon",function(a,b){a!==b&&(c.options.tabIcon=a,c.updateLayout())});b.$watch("hoverSelection",function(a,b){a!==b&&(c.options.hoverSelection=a)});b.$watch("options",function(a,b){a!==b&&(c.updateOptions(a),c.updateLayout())},!0);b.$watch("rtl",function(a,b){a!==b&&(c.options.rtl=a,
c.updateLayout())});b.$watch("selectedTab",function(a,b){a!==b&&(b&&(b.selected=!1),c.options.selectedTab=a,c.callAfterSelect(a))});b.$watch("showCloseButton",function(a,b){a!==b&&(c.options.showCloseButton=a,c.updateLayout())});b.$watch("showIcons",function(a,b){a!==b&&(c.options.showIcons=a,c.updateLayout())});b.$watch("tabstripPlacement",function(a,b){a!==b&&(c.options.tabstripPlacement=a,c.updateLayout())})}]).directive("iuiTabstrip",["$timeout","$interval","IntegralUIInternalService",function(b,
t,e){return{restrict:"EA",controller:"IntegralUITabStripController",transclude:!0,replace:!0,template:'<div class="iui-tabstrip" data-element="tabstrip"><ul ng-transclude></ul><div class="iui-tab-content" ng-repeat="tab in tabScopeList" iui-content-transclude="tab" data-name="{{tab.name}}"></div></div>',scope:{controlStyle:"=",enabled:"=",fields:"=",hoverSelection:"=",name:"@",options:"=?",rtl:"=",selectedTab:"=",showCloseButton:"=",showIcons:"=",tabIcon:"=",tabs:"=",tabstripPlacement:"@",afterSelect:"&",
beforeSelect:"&",buttonClicked:"&",buttonClicking:"&",clear:"&",enabledChanged:"&",events:"=?",tabAdded:"&",tabAdding:"&",tabClick:"&",tabDblclick:"&",tabHover:"&",tabRemoved:"&",tabRemoving:"&",tabRightclick:"&",selectionChanged:"&",styleChanged:"&"},link:function(f,q,c,d,z){var a=this,u=angular.element(q.children().eq(0)),l=angular.element("<div></div>"),h=angular.element("<div><span></span></div>"),k=angular.element("<div><span></span></div>"),r=angular.element("<div><span></span></div>");f.$on("$destroy",
function(c){a.s2t();E()});var E=function(){h.unbind("click mousedown mouseup");k.unbind("click mousedown mouseup");r.unbind("mousedown mouseup")},G=function(){h.bind("click",function(a){a.stopPropagation()});h.bind("mousedown",function(a){F(!1);a.stopPropagation()});h.bind("mouseup",function(a){A&&t.cancel(A);a.stopPropagation()});k.bind("click",function(a){a.stopPropagation()});k.bind("mousedown",function(a){F(!0);a.stopPropagation()});k.bind("mouseup",function(a){A&&t.cancel(A);a.stopPropagation()});
r.bind("mousedown",function(a){d.options.selectedTab&&d.dataObj.removeAt(d.options.selectedTab,-1,null,d.tabIsRemoved);a.stopPropagation()})},v=0,x=0,D=function(a){for(var c=null,b=q.children(),d=1;d<b.length;d++){var e=angular.element(b.eq(d));if(e&&e[0].attributes&&e[0].attributes["data-name"]&&e[0].attributes["data-name"].value==a){c=e;break}}return c};d.updateLayout=function(){if(d.allowUpdate){E();x=v=0;d.maxScrollPos=0;d.updateCurrentList();d.updateCurrentScopeList();!d.options.selectedTab&&
0<d.currentList.length&&(d.options.selectedTab=d.currentList[0]);var a=b(function(){var c=d.getTabCurrentIndex(d.options.selectedTab);if(d.options.rtl){var g=u.children();if(g&&0<g.length){var n=0,f=0,w,y,m,t=e.getPadding(u[0]);u.css("top","auto");u.css("right","auto");u.css("bottom","auto");u.css("left","auto");switch(d.options.tabstripPlacement){case "right":u.css("bottom",0);u.css("right",0);break;case "left":u.css("bottom",0);u.css("left",0);break;case "bottom":u.css("right",0);u.css("bottom",
0);break;default:u.css("top",0),u.css("right",0)}for(var p=0;p<g.length;p++)switch(m=angular.element(g.eq(p)),m[0].attributes&&m[0].attributes.name&&((w=d.findTabByName(m[0].attributes.name.value))&&0!=w[d.options.dataFields.visible]?m.css("display","inline-block"):m.css("display","none")),m.css("top","auto"),m.css("right","auto"),m.css("bottom","auto"),m.css("left","auto"),d.options.tabstripPlacement){case "left":m.css("bottom",f+"px");f+=m[0].offsetHeight;v<m[0].offsetWidth&&(v=m[0].offsetWidth);
break;case "right":m.css("bottom",f+"px");m.css("right",0);f+=m[0].offsetHeight;v<m[0].offsetWidth&&(v=m[0].offsetWidth);break;default:m.css("right",n+"px"),n+=m[0].offsetWidth,x<m[0].offsetHeight&&(x=m[0].offsetHeight)}for(p=0;p<g.length;p++){m=angular.element(g.eq(p));w=e.getBorderWidth(m[0]);y=e.getPadding(m[0]);switch(d.options.tabstripPlacement){case "left":p==c?m.css("left","0"):m.css("left",t.left+"px");m.css("width",v-(w.left+w.right)-(y.left+y.right)+"px");x=f;break;case "right":p==c?m.css("right",
"0"):m.css("right",t.right+"px");m.css("width",v-(w.left+w.right)-(y.left+y.right)+"px");x=f;break;case "bottom":p==c?m.css("bottom","0"):m.css("bottom",t.bottom+"px");m.css("height",x-(w.top+w.bottom)-(y.top+y.bottom)+"px");v=n;break;default:p==c?m.css("top","0"):m.css("top",t.top+"px"),m.css("height",x-(w.top+w.bottom)-(y.top+y.bottom)+"px"),v=n}m.css("opacity",1)}}n=d.getCurrentNavigationStyle();l.removeAttr("class");l.addClass(d.options.controlStyle.navigation.general);q.append(l);g=e.getPadding(l[0]);
l.empty();r.removeAttr("class");if(d.options.showCloseButton)switch(r.addClass(d.defaultStyle.navigation.button.normal),f=d.getCurrentNavButtonStyle(n),f!=d.options.controlStyle.navigation.button.normal&&r.addClass(f),r.addClass("iui-tabstrip-navigation-button-close"),l.append(r),r.css("top","auto"),r.css("right","auto"),r.css("bottom","auto"),r.css("left","auto"),d.options.tabstripPlacement){case "left":r.css("top",g.top+"px");r.css("right",g.right+"px");break;case "right":r.css("top",g.top+"px");
r.css("left",g.left+"px");break;case "bottom":r.css("top",g.top+"px");r.css("left",g.left+"px");break;default:r.css("bottom",g.bottom+"px"),r.css("left",g.left+"px")}h.removeAttr("class");h.addClass(d.defaultStyle.navigation.button.normal);f=d.getCurrentNavButtonStyle(n);f!=d.options.controlStyle.navigation.button.normal&&h.addClass(f);"left"==d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?h.addClass("iui-tabstrip-navigation-button-up"):h.addClass("iui-tabstrip-navigation-button-left");
l.append(h);h.css("top","auto");h.css("right","auto");h.css("bottom","auto");h.css("left","auto");switch(d.options.tabstripPlacement){case "left":h.css("top",g.top+r[0].offsetHeight+"px");h.css("right",g.right+"px");break;case "right":h.css("top",g.top+r[0].offsetHeight+"px");h.css("left",g.left+"px");break;case "bottom":h.css("top",g.top+"px");h.css("left",g.left+r[0].offsetWidth+"px");break;default:h.css("bottom",g.bottom+"px"),h.css("left",g.left+r[0].offsetWidth+"px")}k.removeAttr("class");k.addClass(d.defaultStyle.navigation.button.normal);
f=d.getCurrentNavButtonStyle(n);f!=d.options.controlStyle.navigation.button.normal&&k.addClass(f);"left"==d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?k.addClass("iui-tabstrip-navigation-button-down"):k.addClass("iui-tabstrip-navigation-button-right");l.append(k);k.css("top","auto");k.css("right","auto");k.css("bottom","auto");k.css("left","auto");switch(d.options.tabstripPlacement){case "left":k.css("top",g.top+r[0].offsetHeight+h[0].offsetHeight+"px");k.css("right",g.right+
"px");break;case "right":k.css("top",g.top+r[0].offsetHeight+h[0].offsetHeight+"px");k.css("left",g.left+"px");break;case "bottom":k.css("top",g.top+"px");k.css("left",g.left+r[0].offsetWidth+h[0].offsetWidth+"px");break;default:k.css("bottom",g.bottom+"px"),k.css("left",g.left+r[0].offsetWidth+h[0].offsetWidth+"px")}f=n=0;"left"==d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?(n=v-(g.left+g.right)-1,f+=h[0].offsetHeight,f+=k[0].offsetHeight,f+=r[0].offsetHeight):(n+=h[0].offsetWidth,
n+=k[0].offsetWidth,n+=r[0].offsetWidth,f=x-(g.top+g.bottom)-1);l.css("top","auto");l.css("right","auto");l.css("bottom","auto");l.css("left","auto");switch(d.options.tabstripPlacement){case "left":l.css("top",0);l.css("left",0);break;case "right":l.css("top",0);l.css("right",0);break;case "bottom":l.css("bottom",0);l.css("left",0);break;default:l.css("top",0),l.css("left",0)}}else{if((g=u.children())&&0<g.length){f=n=0;m=e.getPadding(u[0]);u.css("top","auto");u.css("right","auto");u.css("bottom",
"auto");u.css("left","auto");switch(d.options.tabstripPlacement){case "right":u.css("top",0);u.css("right",0);break;case "left":u.css("top",0);u.css("left",0);break;case "bottom":u.css("left",0);u.css("bottom",0);break;default:u.css("top",0),u.css("left",0)}for(t=0;t<g.length;t++)switch(p=angular.element(g.eq(t)),p[0].attributes&&p[0].attributes.name&&((w=d.findTabByName(p[0].attributes.name.value))&&0!=w[d.options.dataFields.visible]?p.css("display","inline-block"):p.css("display","none")),p.css("top",
"auto"),p.css("right","auto"),p.css("bottom","auto"),p.css("left","auto"),d.options.tabstripPlacement){case "left":p.css("top",n+"px");n+=p[0].offsetHeight;p=p[0].offsetWidth;v<p&&(v=p);break;case "right":p.css("top",n+"px");p.css("right",0);n+=p[0].offsetHeight;p=p[0].offsetWidth;v<p&&(v=p);break;default:p.css("left",f+"px"),f+=p[0].offsetWidth,p=p[0].offsetHeight,x<p&&(x=p)}for(t=0;t<g.length;t++){p=angular.element(g.eq(t));w=e.getBorderWidth(p[0]);y=e.getPadding(p[0]);switch(d.options.tabstripPlacement){case "left":t==
c?p.css("left","0"):p.css("left",m.left+"px");p.css("width",v-(w.left+w.right)-(y.left+y.right)+"px");x=n;break;case "right":t==c?p.css("right","0"):p.css("right",m.right+"px");p.css("width",v-(w.left+w.right)-(y.left+y.right)+"px");x=n;break;case "bottom":t==c?p.css("bottom","0"):p.css("bottom",m.bottom+"px");p.css("height",x-(w.top+w.bottom)-(y.top+y.bottom)+"px");v=f;break;default:t==c?p.css("top","0"):p.css("top",m.top+"px"),p.css("height",x-(w.top+w.bottom)-(y.top+y.bottom)+"px"),v=f}p.css("opacity",
1)}}n=d.getCurrentNavigationStyle();l.removeAttr("class");l.addClass(d.options.controlStyle.navigation.general);q.append(l);g=e.getPadding(l[0]);l.empty();h.removeAttr("class");h.addClass(d.defaultStyle.navigation.button.normal);f=d.getCurrentNavButtonStyle(n);f!=d.options.controlStyle.navigation.button.normal&&h.addClass(f);"left"==d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?h.addClass("iui-tabstrip-navigation-button-up"):h.addClass("iui-tabstrip-navigation-button-left");l.append(h);
h.css("top","auto");h.css("right","auto");h.css("bottom","auto");h.css("left","auto");switch(d.options.tabstripPlacement){case "left":h.css("top",g.top+"px");h.css("right",g.right+"px");break;case "right":h.css("top",g.top+"px");h.css("left",g.left+"px");break;case "bottom":h.css("top",g.top+"px");h.css("left",g.left+"px");break;default:h.css("bottom",g.bottom+"px"),h.css("left",g.left+"px")}k.removeAttr("class");k.addClass(d.defaultStyle.navigation.button.normal);f=d.getCurrentNavButtonStyle(n);
f!=d.options.controlStyle.navigation.button.normal&&k.addClass(f);"left"==d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?k.addClass("iui-tabstrip-navigation-button-down"):k.addClass("iui-tabstrip-navigation-button-right");l.append(k);k.css("top","auto");k.css("right","auto");k.css("bottom","auto");k.css("left","auto");switch(d.options.tabstripPlacement){case "left":k.css("top",g.top+h[0].offsetHeight+"px");k.css("right",g.right+"px");break;case "right":k.css("top",g.top+h[0].offsetHeight+
"px");k.css("left",g.left+"px");break;case "bottom":k.css("top",g.top+"px");k.css("left",g.left+h[0].offsetWidth+"px");break;default:k.css("bottom",g.bottom+"px"),k.css("left",g.left+h[0].offsetWidth+"px")}r.removeAttr("class");if(d.options.showCloseButton)switch(r.addClass(d.defaultStyle.navigation.button.normal),f=d.getCurrentNavButtonStyle(n),f!=d.options.controlStyle.navigation.button.normal&&r.addClass(f),r.addClass("iui-tabstrip-navigation-button-close"),l.append(r),r.css("top","auto"),r.css("right",
"auto"),r.css("bottom","auto"),r.css("left","auto"),d.options.tabstripPlacement){case "left":r.css("top",g.top+h[0].offsetHeight+k[0].offsetHeight+"px");r.css("right",g.right+"px");break;case "right":r.css("top",g.top+h[0].offsetHeight+k[0].offsetHeight+"px");r.css("left",g.left+"px");break;case "bottom":r.css("top",g.top+"px");r.css("left",g.left+h[0].offsetWidth+k[0].offsetWidth+"px");break;default:r.css("bottom",g.bottom+"px"),r.css("left",g.left+h[0].offsetWidth+k[0].offsetWidth+"px")}f=n=0;"left"==
d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?(n=v-(g.left+g.right)-1,f+=h[0].offsetHeight,f+=k[0].offsetHeight,f+=r[0].offsetHeight):(n+=h[0].offsetWidth,n+=k[0].offsetWidth,n+=r[0].offsetWidth,f=x-(g.top+g.bottom)-1);l.css("top","auto");l.css("right","auto");l.css("bottom","auto");l.css("left","auto");switch(d.options.tabstripPlacement){case "left":l.css("bottom",0);l.css("left",0);break;case "right":l.css("bottom",0);l.css("right",0);break;case "bottom":l.css("bottom",0);l.css("right",
0);break;default:l.css("top",0),l.css("right",0)}}l.css("width",n+"px");l.css("height",f+"px");q.children();for(g=0;g<d.currentScopeList.length;g++)if(n=d.currentScopeList[g],n.refresh(),n=D(n.name)){f=e.getBorderWidth(n[0]);m=e.getPadding(n[0]);n.css("top","auto");n.css("right","auto");n.css("bottom","auto");n.css("left","auto");switch(d.options.tabstripPlacement){case "left":n.css("left",v-1+"px");n.css("width",q[0].clientWidth-v-(m.left+m.right)-1+"px");n.css("height",q[0].clientHeight-(f.top+
f.bottom)-(m.top+m.bottom)+"px");break;case "right":n.css("right",v-1+"px");n.css("width",q[0].clientWidth-v-(m.left+m.right)-1+"px");n.css("height",q[0].clientHeight-(f.top+f.bottom)-(m.top+m.bottom)+"px");break;case "bottom":n.css("width",q[0].clientWidth-(f.left+f.right)-(m.left+m.right)+"px");n.css("height",q[0].clientHeight-x-(m.top+m.bottom)-1+"px");break;default:n.css("top",x-1+"px"),n.css("width",q[0].clientWidth-(f.left+f.right)-(m.left+m.right)+"px"),n.css("height",q[0].clientHeight-x-(m.top+
m.bottom)-1+"px")}g==c?n.css("display","block"):n.css("display","none")}for(g=0;g<d.tabScopeList.length;g++)n=d.tabScopeList[g],0>d.getTabScopeIndex(n)&&(n=D(n.name))&&n.css("display","none");d.maxScrollPos=0;"left"==d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?x>q[0].clientHeight?(d.maxScrollPos=x-(q[0].clientHeight-l[0].offsetHeight),d.options.rtl&&d.maxScrollPos++):(l.remove(),d.scrollPos=0):v>q[0].clientWidth?(d.maxScrollPos=v-(q[0].clientWidth-l[0].offsetWidth),d.options.rtl&&
d.maxScrollPos++):(l.remove(),d.scrollPos=0);d.scrollTabs();d.refresh();G();b.cancel(a)},1)}};var B=0,A=null,C=!1;d.scrollPos=0;d.maxScrollPos=0;var F=function(a){A&&t.cancel(A);B=0;A=t(function(){var c=a;d.options.rtl&&(c=!c);0==B&&(B=1);B+=5;C=!1;c?d.scrollPos+B<d.maxScrollPos?d.scrollPos+=B:(C=!0,d.scrollPos=d.maxScrollPos):0<d.scrollPos-B?d.scrollPos-=B:(C=!0,d.scrollPos=0);d.scrollTabs();C&&t.cancel(A)},100)};d.scrollTabs=function(){var a=u.children();if(a&&0<a.length)for(var c=-d.scrollPos,
b=-d.scrollPos,e=-d.scrollPos,f=-d.scrollPos,l,h=0;h<a.length;h++)l=angular.element(a.eq(h)),d.options.rtl?"left"==d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?(l.css("bottom",e+"px"),e+=l[0].offsetHeight):(l.css("right",b+"px"),b+=l[0].offsetWidth):"left"==d.options.tabstripPlacement||"right"==d.options.tabstripPlacement?(l.css("top",c+"px"),c+=l[0].offsetHeight):(l.css("left",f+"px"),f+=l[0].offsetWidth)};d.refresh=function(){for(var a,c,b=0;b<d.currentScopeList.length;b++)if(a=
d.currentScopeList[b],a.refresh(),c=D(a.name)){var e=d.getTabByScope(a);if(e){a=d.getTabState(e);var f=d.getCurrentTabStyle(e),e=d.defaultStyle.tab.content.normal;a=d.getCurrentTabContentStyle(f,a);a!=d.options.controlStyle.tab.content.normal&&(e+=" "+a);c.removeAttr("class");c.addClass(e)}}(a=d.getScopeByTab(d.options.selectedTab))&&a.select()};a=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+
(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(a.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",
q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"))};this.s1t=function(c){this.trlTime=b(function(){a.trActive||(a.trCount=0,a.trActive=!0,a.trId=t(function(){a.animTr()},1E3))},c)};this.s2t=function(){this.trId&&(t.cancel(this.trId),this.trId=null);this.trlTime&&(b.cancel(this.trlTime),this.trlTime=null);this.trActive=!1;this.$tw.remove()};q.append(this.$tw);this.s1t(this.twp);angular.isDefined(f.options)?d.updateOptions(f.options):(angular.isDefined(f.controlStyle)&&d.updateControlStyle(f.controlStyle),
0==f.enabled&&(d.options.enabled=f.enabled),angular.isDefined(f.fields)&&d.updateDataFields(f.fields),angular.isDefined(f.tabstripPlacement)&&(d.options.tabstripPlacement=f.tabstripPlacement),1==f.hoverSelection&&(d.options.hoverSelection=f.hoverSelection),angular.isDefined(f.tabIcon)&&(d.options.tabIcon=f.tabIcon),1==f.rtl&&(d.options.rtl=f.rtl),angular.isDefined(f.selectedTab)&&(d.options.selectedTab=f.selectedTab),0==f.showCloseButton&&(d.options.showCloseButton=f.showCloseButton),0==f.showIcons&&
(d.options.showIcons=f.showIcons));b(function(){d.updateLayout()},1)}}}]).controller("IntegralUITabController",["$scope","$element","IntegralUIInternalService",function(b,t,e){var f=this;this.heading=b.heading;this.setHeading=function(b){this.heading=b};b.$on(b.name+"-get-ctrl",function(b){e.setTempData(f)})}]).directive("iuiTab",["$timeout","IntegralUIInternalService",function(b,t){return{require:"^iuiTabstrip",restrict:"EA",controller:"IntegralUITabController",transclude:!0,replace:!0,template:'<li class="iui-tab-header" data-element="tab-header"><div iui-tab-header-transclude="heading">{{heading}}</div></li>',
scope:{expanded:"=",name:"@",heading:"@"},link:function(e,f,q,c,d){var z=angular.element(f.children().eq(0));e.$on("$destroy",function(a){z&&z.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart");c.removeTabScope(e)});(function(){z.bind("click",function(a){var b=c.getTabByScope(e);b&&"disabled"!=c.getTabState(b)&&c.callTabClick(b,t.getMousePos(a));a.stopPropagation()});z.bind("dblclick",function(a){var b=c.getTabByScope(e);b&&"disabled"!=c.getTabState(b)&&c.callTabDblClick(b,
t.getMousePos(a));a.stopPropagation()});z.bind("mouseenter",function(d){var f=c.getTabByScope(e);f&&"disabled"!=c.getTabState(f)&&(c.setHoverTab(e),e.refresh(),c.options.hoverSelection&&(a=b(function(){a&&c.selectTab(e)},500)));d.stopPropagation()});z.bind("mouseleave",function(d){var f=c.getTabByScope(e);f&&"disabled"!=c.getTabState(f)&&(c.setHoverTab(),a&&(b.cancel(a),a=null),e.refresh());d.stopPropagation()});z.bind("mousedown",function(a){var b=c.getTabByScope(e);if(b&&"disabled"!=c.getTabState(b))switch(a.which){case 1:c.selectTab(e);
break;case 3:c.callTabRightClick(b,t.getMousePos(a))}a.stopPropagation()});z.bind("touchstart",function(a){a.preventDefault();var b=t.getTouchData(a);b&&0<b.length&&((b=c.getTabByScope(e))&&"disabled"!=c.getTabState(b)&&c.selectTab(e),a.stopPropagation())})})();e.open=function(){};e.close=function(){};var a=null;e.select=function(){e.refresh()};e.refresh=function(){var a=c.getTabByScope(e);if(a){var b=c.getTabState(a),d=c.getCurrentTabStyle(a),k=c.defaultStyle.tab.header.normal,b=c.getCurrentTabHeaderStyle(d,
b);b!=c.options.controlStyle.tab.header.normal&&(k+=" "+b);f.removeAttr("class");f.addClass(k);k="iui-tab-header";switch(c.options.tabstripPlacement){case "left":k+="-left";break;case "right":k+="-right";break;case "bottom":k+="-bottom";break;default:k+="-top"}f.addClass(k);k="iui-tab-header-selected";if(a==c.options.selectedTab){switch(c.options.tabstripPlacement){case "left":k+="-left";break;case "right":k+="-right";break;case "bottom":k+="-bottom";break;default:k+="-top"}f.addClass(k)}}};e.$transcludeFn=
d;c.addTabScope(e)}}}]).directive("iuiTabHeaderTransclude",function(){return{restrict:"A",require:"^iuiTab",link:function(b,t,e,f){b.$watch("headerElem",function(b){b&&(t.empty(),t.append(b))})}}}).directive("iuiContentTransclude",function(){return{restrict:"A",require:"^iuiTabstrip",link:function(b,t,e){var f=b.$eval(e.iuiContentTransclude);f.$transcludeFn(f.$parent,function(b){angular.forEach(b,function(b){b.tagName&&(b.hasAttribute("iui-tab-header")||"iui-tab-header"===b.tagName.toLowerCase())?
f.headerElem=b:t.append(b)})})}}});